[gd_scene load_steps=17 format=3 uid="uid://blvtun7e54rk8"]

[ext_resource type="PackedScene" path="res://Scenes/Env/LegacyEnv.tscn" id="1"]
[ext_resource type="Script" path="res://scripts/LegacyLevel.gd" id="2"]
[ext_resource type="Script" path="res://scripts/GameWorld/LoadLegacyObjects.gd" id="3"]
[ext_resource type="PackedScene" path="res://Scenes/Menu/PauseMenu.tscn" id="4"]
[ext_resource type="Script" path="res://src/Legacy/LegacyWorldLoaderNode.cs" id="5"]
[ext_resource type="Script" path="res://Scenes/Test.gd" id="6"]
[ext_resource type="PackedScene" path="res://Scenes/UI/EnteringLevel.tscn" id="7"]
[ext_resource type="Script" path="res://scripts/OutOfBounds.gd" id="8"]
[ext_resource type="Texture2D" uid="uid://cdc6rj4l5k3el" path="res://res/txrs/glass256.png" id="9"]
[ext_resource type="AudioStream" uid="uid://c4banogmjanv2" path="res://res/music/Funky.ogg" id="10"]
[ext_resource type="Script" path="res://Scenes/BubblesResize.gd" id="11"]
[ext_resource type="Script" path="res://scripts/GameManager.gd" id="12"]

[sub_resource type="BoxShape3D" id="1"]

[sub_resource type="Gradient" id="2"]
offsets = PackedFloat32Array(0, 0.540741, 1)
colors = PackedColorArray(1, 1, 1, 1, 0.576471, 0.568627, 0.568627, 0.811765, 1, 1, 1, 0)

[sub_resource type="GradientTexture2D" id="3"]
gradient = SubResource("2")

[sub_resource type="ParticleProcessMaterial" id="4"]
emission_shape = 2
emission_sphere_radius = 1.0
gravity = Vector3(0, -200, 0)
color_ramp = SubResource("3")

[node name="Gameplay" type="Node3D"]

[node name="Environment" parent="." instance=ExtResource("1")]

[node name="LegacyLevel" type="Node3D" parent="."]
script = ExtResource("2")

[node name="ObjectLoader" type="Node" parent="LegacyLevel"]
script = ExtResource("3")

[node name="HTTPRequest" type="HTTPRequest" parent="LegacyLevel"]

[node name="MusicPlayer" type="AudioStreamPlayer" parent="LegacyLevel"]
process_mode = 3
stream = ExtResource("10")
volume_db = -15.0

[node name="LevelDebris" type="Node3D" parent="LegacyLevel"]

[node name="GameManager" type="Node" parent="LegacyLevel"]
script = ExtResource("12")

[node name="EnteringUI" parent="LegacyLevel" instance=ExtResource("7")]
process_mode = 3
layout_mode = 3
anchors_preset = 2
grow_vertical = 0
mouse_filter = 2

[node name="PauseMenu" parent="LegacyLevel" instance=ExtResource("4")]
visible = false
layout_mode = 3
anchors_preset = 15
grow_horizontal = 2
grow_vertical = 2

[node name="AddPlayCount" type="HTTPRequest" parent="LegacyLevel"]

[node name="LegacyWorldLoader" type="Node" parent="."]
script = ExtResource("5")
_loaderNodePath = NodePath("../LegacyLevel")

[node name="Button" type="Button" parent="LegacyWorldLoader"]
visible = false
offset_left = 10.0
offset_top = 10.0
offset_right = 148.0
offset_bottom = 46.0
text = "Run GDNative"
script = ExtResource("6")

[node name="HTTPRequest" type="HTTPRequest" parent="LegacyWorldLoader/Button"]

[node name="OOBArea" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -10.5, 0)
script = ExtResource("8")

[node name="CollisionShape3D" type="CollisionShape3D" parent="OOBArea"]
transform = Transform3D(200, 0, 0, 0, 20, 0, 0, 0, 200, 0, -20, 0)
shape = SubResource("1")

[node name="Bubbles" type="GPUParticles2D" parent="OOBArea"]
visible = false
position = Vector2(683, 788.934)
rotation = -1.5708
emitting = false
amount = 240
process_material = SubResource("4")
texture = ExtResource("9")
lifetime = 4.0
preprocess = 0.5
randomness = 0.08
visibility_rect = Rect2(3.46936, -1146.11, 1354.03, 2194.14)
script = ExtResource("11")

[connection signal="pressed" from="LegacyWorldLoader/Button" to="LegacyWorldLoader/Button" method="_on_Button_pressed"]
[connection signal="body_entered" from="OOBArea" to="OOBArea" method="_on_OOBArea_body_entered"]
